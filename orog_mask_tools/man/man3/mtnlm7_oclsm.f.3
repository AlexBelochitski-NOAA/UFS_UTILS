.TH "/home/ed/UFS_UTILS/sorc/orog_mask_tools.fd/orog.fd/mtnlm7_oclsm.f" 3 "Thu Mar 11 2021" "Version 1.0.0" "orog_mask_tools" \" -*- nroff -*-
.ad l
.nh
.SH NAME
/home/ed/UFS_UTILS/sorc/orog_mask_tools.fd/orog.fd/mtnlm7_oclsm.f
.SH SYNOPSIS
.br
.PP
.SS "Functions/Subroutines"

.in +1c
.ti -1c
.RI "program \fB__mtnlm7_oclsm\&.f__\fP"
.br
.ti -1c
.RI "subroutine \fBget_index\fP (IMN, JMN, npts, lonO, latO, DELXN, jst, jen, ilist, numx)"
.br
.ti -1c
.RI "real function \fBget_lat_angle\fP (dy, DEGRAD)"
.br
.ti -1c
.RI "real function \fBget_lon_angle\fP (dx, lat, DEGRAD)"
.br
.ti -1c
.RI "subroutine \fBget_mismatch_index\fP (im_in, jm_in, geolon_in, geolat_in, bitmap_in, num_out, lon_out, lat_out, iindx, jindx)"
.br
.ti -1c
.RI "real function \fBget_xnsum\fP (lon1, lat1, lon2, lat2, IMN, JMN, glat, zavg, zslm, delxn)"
.br
.ti -1c
.RI "subroutine \fBget_xnsum2\fP (lon1, lat1, lon2, lat2, IMN, JMN, glat, zavg, zslm, delxn, xnsum1, xnsum2, HC)"
.br
.ti -1c
.RI "subroutine \fBget_xnsum3\fP (lon1, lat1, lon2, lat2, IMN, JMN, glat, zavg, zslm, delxn, xnsum1, xnsum2, HC)"
.br
.ti -1c
.RI "subroutine \fBgg2rg\fP (im, jm, numi, a)"
.br
.ti -1c
.RI "subroutine \fBgl2any\fP (IP, KM, G1, IM1, JM1, G2, IM2, JM2, IDRTI, RLON, RLAT)"
.br
.ti -1c
.RI "logical function \fBinside_a_polygon\fP (lon1, lat1, npts, lon2, lat2)"
.br
.ti -1c
.RI "subroutine \fBinterpolate_mismatch\fP (im_in, jm_in, data_in, num_out, data_out, iindx, jindx)"
.br
.ti -1c
.RI "subroutine \fBlatlon2xyz\fP (siz, lon, lat, x, y, z)"
.br
.ti -1c
.RI "subroutine \fBmakemt\fP (ZAVG, ZSLM, ORO, SLM, VAR, VAR4, GLAT, IST, IEN, JST, JEN, IM, JM, IMN, JMN, XLAT, numi)"
.br
.ti -1c
.RI "subroutine \fBmakemt2\fP (ZAVG, ZSLM, ORO, SLM, land_frac, VAR, VAR4, GLAT, IM, JM, IMN, JMN, lon_c, lat_c)"
.br
.ti -1c
.RI "subroutine \fBmakeoa\fP (ZAVG, VAR, GLAT, OA4, OL, IOA4, ELVMAX, ORO, oro1, XNSUM, XNSUM1, XNSUM2, XNSUM3, XNSUM4, IST, IEN, JST, JEN, IM, JM, IMN, JMN, XLAT, numi)"
.br
.ti -1c
.RI "subroutine \fBmakeoa2\fP (ZAVG, zslm, VAR, GLAT, OA4, OL, IOA4, ELVMAX, ORO, oro1, XNSUM, XNSUM1, XNSUM2, XNSUM3, XNSUM4, IM, JM, IMN, JMN, lon_c, lat_c, lon_t, lat_t, dx, dy, is_south_pole, is_north_pole)"
.br
.ti -1c
.RI "subroutine \fBmakeoa3\fP (ZAVG, zslm, VAR, GLAT, OA4, OL, IOA4, ELVMAX, ORO, SLM, oro1, XNSUM, XNSUM1, XNSUM2, XNSUM3, XNSUM4, IM, JM, IMN, JMN, lon_c, lat_c, lon_t, lat_t, is_south_pole, is_north_pole, IMI, JMI, OA_IN, OL_IN, slm_in, lon_in, lat_in)"
.br
.ti -1c
.RI "subroutine \fBmakepc\fP (ZAVG, ZSLM, THETA, GAMMA, SIGMA, GLAT, IST, IEN, JST, JEN, IM, JM, IMN, JMN, XLAT, numi)"
.br
.ti -1c
.RI "subroutine \fBmakepc2\fP (ZAVG, ZSLM, THETA, GAMMA, SIGMA, GLAT, IM, JM, IMN, JMN, lon_c, lat_c)"
.br
.ti -1c
.RI "subroutine \fBmaxmin\fP (ia, len, tile)"
.br
.ti -1c
.RI "subroutine \fBminmaxj\fP (IM, JM, A, title)"
.br
.ti -1c
.RI "subroutine \fBminmxj\fP (IM, JM, A, title)"
.br
.ti -1c
.RI "subroutine \fBmnmxja\fP (IM, JM, A, imax, jmax, title)"
.br
.ti -1c
.RI "subroutine \fBnanc\fP (a, l, c)"
.br
.ti -1c
.RI "subroutine \fBread_g\fP (glob, ITOPO)"
.br
.ti -1c
.RI "subroutine \fBrevers\fP (IM, JM, numi, F, WRK)"
.br
.ti -1c
.RI "subroutine \fBrg2gg\fP (im, jm, numi, a)"
.br
.ti -1c
.RI "subroutine \fBspfft1\fP (IMAX, INCW, INCG, KMAX, W, G, IDIR)"
.br
.ti -1c
.RI "real function \fBspherical_angle\fP (v1, v2, v3)"
.br
.ti -1c
.RI "real function \fBspherical_distance\fP (theta1, phi1, theta2, phi2)"
.br
.ti -1c
.RI "subroutine \fBtersub\fP (IMN, JMN, IM, JM, NM, NR, NF0, NF1, NW, EFAC, BLAT, OUTGRID, INPUTOROG)"
.br
.ti -1c
.RI "real function \fBtimef\fP ()"
.br
.in -1c
.SH "Detailed Description"
.PP 
TERRAIN MAKER FOR GLOBAL SPECTRAL MODEL 
.PP
\fBAuthor\fP
.RS 4
IREDELL 
.RE
.PP
\fBDate\fP
.RS 4
92-04-16
.RE
.PP
THIS PROGRAM CREATES 7 TERRAIN-RELATED FILES COMPUTED FROM THE NAVY 10-MINUTE TERRAIN DATASET\&. THE MODEL PHYSICS GRID PARAMETERS AND SPECTRAL TRUNCATION AND FILTER PARAMETERS ARE READ BY THIS PROGRAM AS INPUT\&. THE 7 FILES PRODUCED ARE RESPECTIVELY: 1) SEA-LAND MASK ON MODEL PHYSICS GRID 2) GRIDDED OROGRAPHY ON MODEL PHYSICS GRID 3) MOUNTAIN STD DEV ON MODEL PHYSICS GRID 4) SPECTRAL OROGRAPHY IN SPECTRAL DOMAIN 5) UNFILTERED GRIDDED OROGRAPHY ON MODEL PHYSICS GRID 6) GRIB SEA-LAND MASK ON MODEL PHYSICS GRID 7) GRIB GRIDDED OROGRAPHY ON MODEL PHYSICS GRID THE OROGRAPHY IS ONLY FILTERED FOR WAVENUMBERS GREATER THAN NF0\&. FOR WAVENUMBERS N BETWEEN NF0 AND NF1, THE OROGRAPHY IS FILTERED BY THE FACTOR 1-((N-NF0)/(NF1-NF0))**2\&. THE FILTERED OROGRAPHY WILL NOT HAVE INFORMATION BEYOND WAVENUMBER NF1\&.
.PP
PROGRAM HISTORY LOG:
.IP "\(bu" 2
92-04-16 IREDELL
.IP "\(bu" 2
98-02-02 IREDELL FILTER
.IP "\(bu" 2
98-05-31 HONG Modified for subgrid orography used in Kim's scheme
.IP "\(bu" 2
98-12-31 HONG Modified for high-resolution GTOPO orography
.IP "\(bu" 2
99-05-31 HONG Modified for getting OL4 (mountain fraction)
.IP "  \(bu" 4
00-02-10 Moorthi's modifications
.PP

.IP "\(bu" 2
00-04-11 HONG Modified for reduced grids
.IP "\(bu" 2
00-04-12 Iredell Modified for reduced grids
.IP "\(bu" 2
02-01-07 (\fIj\fP) modified for principal axes of orography There are now 14 files, 4 additional for lm mb
.IP "  \(bu" 4
04-04-04 (\fIj\fP) re-Test on IST/ilen calc for sea-land mask(\fIj\fP)
.IP "  \(bu" 4
04-09-04 minus sign here in MAKEOA IST and IEN as in MAKEMT!
.IP "  \(bu" 4
05-09-05 if test on HK and HLPRIM for GAMMA SQRT
.IP "  \(bu" 4
07-08-07 replace 8' with 30' incl GICE, conintue w/ S-Y\&. lake slm
  - 08-08-07  All input 30', UMD option, and filter as described below Quadratic filter applied by default\&. NF0 is normally set to an even value beyond the previous truncation, for example, for jcap=382, NF0=254+2 NF1 is set as jcap+2 (and/or nearest even), eg\&., for t382, NF1=382+2=384 if no filter is desired then NF1=NF0=0 and ORF=ORO but if no filter but spectral to grid (with gibbs) then NF1=jcap+2, and NF1=jcap+1
.PP
INPUT FILES:
.IP "  \(bu" 4
UNIT5 - PHYSICS LONGITUDES (IM), PHYSICS LATITUDES (JM), SPECTRAL TRUNCATION (NM), RHOMBOIDAL FLAG (NR), AND FIRST AND SECOND FILTER PARAMETERS (NF0,NF1)\&. RESPECTIVELY READ IN FREE FORMAT\&.
.IP "  \(bu" 4
UNIT235 - GTOPO 30' AVR for ZAVG elevation
  -   UNIT10     - 30' UMD land (lake) cover mask see MSKSRC switch
.IP "  \(bu" 4
XUNIT11 - GTOPO AVR
.IP "  \(bu" 4
XUNIT12 - GTOPO STD DEV
.IP "  \(bu" 4
XUNIT13 - GTOPO MAX
.IP "  \(bu" 4
UNIT14 - GTOPO SLM (10' NAVY if switched to get lakes
.IP "  \(bu" 4
UNIT15 - GICE Grumbine 30" RAMP Antarctica orog IMNx3616
.IP "  \(bu" 4
UNIT25 - Ocean land-sea mask on gaussian grid 
.br
.PP
OUTPUT FILES:
.IP "  \(bu" 4
UNIT51 - SEA-LAND MASK (IM,JM)
.IP "  \(bu" 4
UNIT52 - GRIDDED OROGRAPHY (IM,JM)
.IP "  \(bu" 4
UNIT54 - SPECTRAL OROGRAPHY ((NM+1)*((NR+1)*NM+2))
.IP "  \(bu" 4
UNIT55 - UNFILTERED GRIDDED OROGRAPHY (IM,JM)
.IP "  \(bu" 4
UNIT57 - GRIB GRIDDED OROGRAPHY (IM,JM)
.PP
SUBPROGRAMS CALLED:
.IP "  \(bu" 4
UNIQUE:
.IP "  \(bu" 4
TERSUB - MAIN SUBPROGRAM
.IP "  \(bu" 4
SPLAT - COMPUTE GAUSSIAN LATITUDES OR EQUALLY-SPACED LATITUDES
.IP "  \(bu" 4
LIBRARY:
.IP "  \(bu" 4
SPTEZ - SPHERICAL TRANSFORM
.IP "  \(bu" 4
GBYTES - UNPACK BITS
.PP
REMARKS: FORTRAN 9X EXTENSIONS ARE USED\&. 
.PP

.PP

.PP
Definition in file \fBmtnlm7_oclsm\&.f\fP\&.
.SH "Function/Subroutine Documentation"
.PP 
.SS "subroutine makemt (integer, dimension(imn,jmn) ZAVG, integer, dimension(imn,jmn) ZSLM, dimension(im,jm) ORO, dimension(im,jm) SLM, dimension(im,jm) VAR, dimension(im,jm) VAR4, dimension(jmn) GLAT, dimension(im,jm) IST, dimension(im,jm) IEN, dimension(jm) JST, dimension(jm) JEN,  IM,  JM,  IMN,  JMN, dimension(jm) XLAT, dimension(jm) numi)"

.PP
\fBNote\fP
.RS 4
undocumented subroutine MAKEMT 
.br
 
.RE
.PP
\fBParameters\fP
.RS 4
\fIZAVG\fP 
.br
\fIZSLM\fP 
.br
\fIORO\fP 
.br
 
.br
\fISLM\fP 
.br
 
.br
\fIVAR\fP 
.br
 
.br
\fIVAR4\fP 
.br
\fIGLAT\fP 
.br
\fIIST\fP 
.br
\fIIEN\fP 
.br
\fIJST\fP 
.br
\fIJEN\fP 
.br
\fIIM\fP 
.br
 
.br
\fIJM\fP 
.br
 
.br
\fIIMN\fP 
.br
\fIJMN\fP 
.br
\fIXLAT\fP 
.br
\fInumi\fP 
.RE
.PP
\fBAuthor\fP
.RS 4
unknown, probably Mark Iredell 
.RE
.PP

.PP
Definition at line 1593 of file mtnlm7_oclsm\&.f\&.
.PP
Referenced by tersub()\&.
.SS "subroutine tersub (integer IMN, integer JMN, integer IM, integer JM, integer NM, integer NR, integer NF0, integer NF1, integer NW, integer EFAC, integer BLAT, character(len=*), intent(in) OUTGRID, character(len=*), intent(in) INPUTOROG)"

.PP
\fBNote\fP
.RS 4
Subroutine TERSUB is undocumented by developer Inserting doxygen framework only including undescribed params 
.RE
.PP
\fBParameters\fP
.RS 4
\fIIMN\fP 
.br
\fIJMN\fP 
.br
\fIIM\fP 
.br
\fIJM\fP 
.br
\fINM\fP 
.br
\fINR\fP 
.br
\fINF0\fP 
.br
\fINF1\fP 
.br
\fINW\fP 
.br
\fIEFAC\fP 
.br
\fIBLAT\fP 
.br
\fIOUTGRID\fP 
.br
\fIIFAC\fP 
.br
\fIEFAC\fP 
.br
\fIBLAT\fP 
.br
\fIOUTGRID\fP 
.br
\fIINPUTOROG\fP 
.RE
.PP
\fBAuthor\fP
.RS 4
Mark Iredell 
.RE
.PP

.PP
Definition at line 187 of file mtnlm7_oclsm\&.f\&.
.PP
References makemt()\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for orog_mask_tools from the source code\&.
